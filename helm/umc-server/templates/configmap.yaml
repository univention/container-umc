# SPDX-License-Identifier: AGPL-3.0-only
# SPDX-FileCopyrightText: 2023 Univention GmbH

---
{{ include "common.configMap" (dict "top" . "overrides" "umc-server.configMap") }}

# TODO: When making this chart BSI compliant, the SMTP secret can be passed
# via an env variable SMTP_SECRET, instead of writing it to SMTP_SECRET_FILE.
# https://git.knut.univention.de/univention/customers/dataport/team-souvap/-/issues/429

{{- define "umc-server.configMap" }}
{{- with .top }}
data:
  LDAP_SECRET_FILE: {{ .Values.umcServer.ldapSecretFile | quote }}
  MACHINE_SECRET_FILE: {{ .Values.umcServer.machineSecretFile | quote }}
  PRIVATE_KEY_FILE: {{ .Values.umcServer.privateKeyFile | quote }}
  CA_CERT_FILE: {{ .Values.umcServer.caCertFile | quote }}
  CERT_PEM_FILE: {{ .Values.umcServer.certPemFile | quote }}
  SMTP_SECRET_FILE: {{ .Values.umcServer.smtpSecretFile | quote }}
{{- end }}
{{- end }}
...
